\SetPicSubDir{ch-Analysis}
\SetExpSubDir{ch-Analysis}

\chapter{Experiment Analysis}
\label{ch:analysis}
\vspace{2em}

\section{Results}

\subsection{Variability among PAC Partitions}
\label{subsec:variability_among_pac_partitions}

Before we can meaningfully aggregate 50 partition results from every PAC model
we need to assess how different these 50 partitions are from each other.
If they are vastly different, it would be evidence that there is error in the
PAC algorithm that produces these partitions; otherwise it would act as a sanity
check on the correctness of our implementation of each corresponding algorithm.

Table~\ref{analysis:table:pac_num_coalitions} presents the mean and standard
deviation of the number of coalitions across 50 runs for every PAC model.
Coefficient of variation (CV) is the ratio of the standard deviation to the mean.
Note that all the PAC models have CV values well below 1, so there is very low
variation in terms of partition size across 50 runs for every PAC model.

\begin{table}[h!]
\centering
\begin{tabular}{|c|c|c|c|}
\hline
       & Mean Partition Size & Standard Deviation & CV \\ \hline
Value Function & 87 & 0 & 0 \\
General Friends & 13 & 1.29 & 0.10  \\
Selective Friends & 20 & 1.83 & 0.09  \\
Selective Enemies & 10 & 0 & 0 \\
General Enemies & 34 & 0.84 & 0.02 \\
Boolean & 31 & 0.46 & 0.02  \\
\hline
\end{tabular}
\caption{PAC Model Partition Size Statistics}
\label{analysis:table:pac_num_coalitions}
\end{table}

Recall that Adjusted Mutual Information (AMI) measures how similar two
partitions are and is very sensitive in detecting very different partitions (
Chapter~\ref{subsec:information_theoretic_measures}).
We calculate the pairwise AMIs among the 50 partitions for each PAC model;
the resulting statistics are presented in
Table~\ref{analysis:table:pac_pairwise_amis}.
We observe even the smallest pairwise AMI for every PAC model $>> 0$ and all CVs
$<< 1$, from which we can conclude that, beyond partition size, the content
of every partition is not dissimilar from each other, consistently across 50
partitions.

\begin{table}[h!]
\centering
\begin{tabular}{|c|c|c|c|}
\hline
       & Minimum Pairwise AMI & Mean Pairwise AMI & CV \\ \hline
Value Function & 1 & 1 & 0 \\
General Friends & 0.6 & 0.78 & 0.09  \\
Selective Friends & 0.66 & 0.84 & 0.08  \\
Selective Enemies & 0.97 & 0.99 & 0.01 \\
General Enemies & 0.93 & 0.97 & 0.01 \\
Boolean & 0.83 & 0.93 & 0.06  \\
\hline
\end{tabular}
\caption{PAC Model Partition Pairwise AMI Statistics}
\label{analysis:table:pac_pairwise_amis}
\end{table}

Now that we have established there is little variation within every set of 50
PAC partitions, as described in Section~\ref{sec:experiment_design}, we select
the ``centroid'' of each set as the representative.
Since all the partitions are reasonably close to each other, it does not
matter either we use AMI or VI for selecting the centroid.
Given that VI is a distance measure therefore more intuitive to work with in
this case, we choose each representative partition as the one with the smallest
sum of VIs to the rest 49 partitions.

% TODO: partition assignments of every parliament member under every model

\subsection{Handcrafted Value Function}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{value_function}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the value function model}
  \label{Analysis:fig:value_function}
\end{figure}

Out of the 50 runs of the algorithm we observe that the resulting partition
is consistent with little variability.
It is not core stable with respect to the partial preference profile.
This is unsurprising due to the PAC model.
The partition has one large coalition consisting of around 60 members
and the rest are all singleton coalitions.
All members of the only large coalition are from right wing parties.

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{pac_value_function}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the PAC value function model}
  \label{Analysis:fig:pac_value_function}
\end{figure}

% TODO: doublecheck if this makes sense
The singleton coalitions are likely a result of the limited size of the derived partial preference profile --- Upon discovery of the smallest $\CC$ in each iteration, we also remove any coalition that contains any of the removed player from the remaining player's preference relation. Since we took away a large number of players in one of the first few iterations, many coalitions are removed from remaining players' preference relations, resulting in isolated nodes in the updated graph which leads to singleton coalitions.
% END TODO: doublecheck if this makes sense

\subsection{Appreciation of Friends}

\textbf{Complete Preference Profiles}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{friends}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the general friends model}
  \label{Analysis:fig:friends}
\end{figure}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{selective_friends}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the selective friends model}
  \label{Analysis:fig:selective_friends}
\end{figure}

The broad disagreement (aka general friends) setup produced a partition with 18
coalitions out of which there are two large coalitions with 66 and 58 members,
respectively.
One of these two large coalitions is made of left wing party politicians,
while the other of right wing party members.
In contrast, by being slightly less selective of friends, the narrow disagreement
(aka selective friends) setup resulted in the grand coalition as the strict core
stable outcome.
This shows that the appreciation of friends model is very sensitive to the
definition of friends.
This outcome further motivates our experiments with the PAC version of these
two friends models, in hope that sampling would dampen such sensitivity.

\textbf{PAC Models}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{pac_friends}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the PAC general friends model}
  \label{Analysis:fig:pac_friends}
\end{figure}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{pac_selective_friends}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the PAC selective friends model}
  \label{Analysis:fig:pac_selective_friends}
\end{figure}

TODO: comment on results of PAC friends and selective friends

\subsection{Boolean Hedonic Games}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{boolean}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the Boolean model}
  \label{Analysis:fig:boolean}
\end{figure}

\begin{figure}[!t]
  \centering
  \includegraphics[width=\linewidth]{\Pic{png}{pac_boolean}}
  \vspace{\BeforeCaptionVSpace}
  \caption{Coalition structure produced by the PAC Boolean model}
  \label{Analysis:fig:pac_boolean}
\end{figure}

\section{Discussion}
